<!DOCTYPE html>
<html lang="en">
  <div th:replace="~{fragments/head.html}"></div>
  <body>
    <div id="app">
      <div th:replace="~{fragments/sidebar.html}"></div>
      <div id="main">
        <header class="mb-3">
          <a href="#" class="burger-btn d-block d-xl-none">
            <i class="bi bi-justify fs-3"></i>
          </a>
        </header>
        <div class="page-content">
          <div class="card shadow-sm border-0">
            <div class="card-body">
              <!-- Vente General Details -->
							<div class="d-flex justify-content-between mb-4">
                <div>
                  <h4 th:text="'ID: ' + ${vente.idVente}">Vente ID</h4>
                </div>
                <div>
                  <h4 th:text="'Montant Total: ' + ${vente.montant}">Montant Total</h4>
                </div>
              </div>

              <!-- Two-column layout for general details -->
              <div class="row">
                <div class="col-md-6">
                  <!-- Client Details (left side) with border box -->
                  <div class="card border" style="border: 2px solid #ccc; padding: 10px;">
                    <div class="card-body">
                      <h4>Client: <span th:text="${vente.client.nom}">Client Name</span></h4>
                      
                      <p th:text="${vente.client.adresse}">Client Contact</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <!-- Other General Details (right side) -->
                  <div class="card">
                    <div class="card-body">
                      <p><strong>Date de Vente:</strong> <span th:text="${vente.dateVente}">Date Vente</span></p>
                      <p><strong>Date Livree:</strong> <span th:text="${vente.dateLivree}">Date Livree</span></p>
                      <p><strong>Adresse Livraison:</strong> <span th:text="${vente.adresseLivraison}">Adresse</span></p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Vente Factures Section -->
              <h5 class="mt-4 mb-3">Factures de Vente</h5>
              <div class="table-responsive">
                <table
                  class="table table-striped table-bordered text-center"
                  id="table1"
                >
                  <thead class="thead-dark">
                    <tr>
                      <th>Produit</th>
                      <th>Quantite</th>
                      <th>Prix Unitaire</th>
                      <th>Montant</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr th:each="facture : ${vente.venteDetails}">
                      <td th:text="${facture.produitFormat.produit.nom}">
                        Produit Name
                      </td>
                      <td th:text="${facture.quantite}">Quantite</td>
                      <td th:text="${facture.prixUnitaire}">Prix Unitaire</td>
                      <td th:text="${facture.montant}">Montant</td>
                      <td>
                        <!-- Edit Button -->
                        <a
                          th:href="@{/client/vente-facture/edit/{id}(id=${facture.idVenteFacture})}"
                          class="btn btn-warning btn-sm"
                        >
                          <i class="bi bi-pencil"></i> Modifier
                        </a>
                        <!-- Delete Button -->
                        <form
                          th:action="@{/client/vente-facture/delete/{id}(id=${facture.idVenteFacture})}"
                          method="post"
                          style="display: inline"
                        >
                          <input type="hidden" name="_method" value="delete" />
                          <button type="submit" class="btn btn-danger btn-sm">
                            <i class="bi bi-trash"></i> Supprimer
                          </button>
                        </form>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <!-- Actions for Vente -->
              <div class="d-flex justify-content-between mt-4">
                <div>
                  <a
                    th:href="@{/vente/edit/{id}(id=${vente.idVente})}"
                    class="btn btn-primary"
                  >
                    <i class="bi bi-pencil"></i> Modifier Vente
                  </a>
                  <a
                    th:href="@{/client/vente-facture/new/{vente-id}(vente-id=${vente.idVente})}"
                    class="btn btn-success"
                  >
                    <i class="bi bi-plus"></i> Ajouter Facture
                  </a>
                </div>
                <form
                  th:action="@{/vente/delete/{id}(id=${vente.idVente})}"
                  method="post"
                >
                  <button class="btn btn-danger" type="submit">
                    <i class="bi bi-trash"></i> Annuler Vente
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>

        <div th:replace="~{fragments/footer.html}"></div>
      </div>
    </div>
  </body>
</html>
